{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Mohamad H\\\\Desktop\\\\KTH\\\\TIDAA3\\\\Fullstack\\\\labbar\\\\Front\\\\FrontEnd\\\\j-client\\\\src\\\\components\\\\DoctorPage.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport ApiService from '../services/ApiServices';\nimport ApiServices from \"../services/ApiServices\";\nimport PatientSearchForm from './PatientSearchForm';\nimport { styles } from './styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MessageItem = ({\n  message,\n  handleReply\n}) => {\n  _s();\n  const [newReplyContent, setNewReplyContent] = useState('');\n  const [senderName, setSenderName] = useState('');\n  const [messageSent, setMessageSent] = useState(false);\n  const handleSendReply = async () => {\n    try {\n      // Call handleReply and pass the receiver's userId and newReplyContent\n      await handleReply(message.sender, newReplyContent);\n      setMessageSent(true); // Set message sent to true after successful send\n      alert(\"Message successfully sent!\");\n      setNewReplyContent(''); // Clear the reply input after sending\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n  useEffect(() => {\n    const fetchSenderName = async () => {\n      try {\n        console.log(message.sender);\n        const senderData = await ApiServices.getPatientByUserId(message.sender);\n        if (senderData) {\n          setSenderName(senderData.name || 'Unknown');\n        } else {\n          setSenderName('Unknown');\n        }\n      } catch (error) {\n        console.error('Error fetching sender data:', error);\n        setSenderName('Unknown');\n      }\n    };\n    fetchSenderName();\n  }, [message.sender]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '10px',\n      borderBottom: '1px solid #eee'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Content:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 16\n      }, this), \" \", message.messageText]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Sender:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 16\n      }, this), \" \", senderName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), !messageSent && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Reply\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newReplyContent,\n        onChange: e => setNewReplyContent(e.target.value),\n        placeholder: \"Type your reply...\",\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSendReply,\n        style: styles.button,\n        children: \"Send Reply\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n};\n_s(MessageItem, \"VZWPMTPjSzA/suk4DDDFoBJR8uk=\");\n_c = MessageItem;\nconst DoctorPage = () => {\n  _s2();\n  const [patients, setPatients] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [getAllSentMessages, setAllSentMessages] = useState([]);\n  const [getAllReceviedMessages, setAllReceviedMessages] = useState([]);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const [searchedPatients, setSearchedPatients] = useState([]); // State för sökta patienter\n\n  const fetchMessages = async userId => {\n    try {\n      console.log(userId);\n      ApiServices.getAllSentMessagesForUser(userId).then(setAllSentMessages);\n      ApiServices.getAllReceivedMessagesForUser(userId).then(setAllReceviedMessages);\n      console.log(getAllSentMessages);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n  const handleSearchComplete = searchResults => {\n    console.log(searchResults);\n    setSearchedPatients(searchResults); // Spara sökresultaten i state\n    //console.log(searchResults)\n  };\n\n  useEffect(() => {\n    // Fetch list of patients when the component mounts\n    const fetchPatients = async () => {\n      try {\n        const fetchedPatients = await ApiService.getPatients(); // Fetch patients from API\n        setPatients(fetchedPatients); // Set the fetched patients in state\n      } catch (error) {\n        console.error('Error fetching patients:', error);\n      }\n    };\n    const userIdFromSession = sessionStorage.getItem('currentUserLoggedIn');\n    if (userIdFromSession) {\n      const {\n        userId\n      } = JSON.parse(userIdFromSession);\n      fetchMessages(userId); // Fetch messages for the logged-in doctor (using userId)\n    }\n\n    fetchPatients();\n  }, []);\n  const handleReply = async (receiverId, replyContent) => {\n    try {\n      if (replyContent) {\n        const userIdFromSession2 = sessionStorage.getItem('currentUserLoggedIn');\n        let senderId = 0;\n        if (userIdFromSession2) {\n          const {\n            userId\n          } = JSON.parse(userIdFromSession2);\n          senderId = userId;\n        }\n        // Here, you can set the selectedPatient based on the receiverId\n        const selectedPatient = patients.find(patient => patient.id === receiverId);\n        setSelectedPatient(selectedPatient || null);\n        const messageData = {\n          messageText: replyContent,\n          timeStamp: new Date().toISOString(),\n          sender: senderId,\n          receiver: receiverId\n        };\n        await ApiService.createMessage(messageData);\n\n        // Fetch updated messages for the logged-in doctor after sending the reply\n        const userIdFromSession = sessionStorage.getItem('currentUserLoggedIn');\n        if (userIdFromSession) {\n          const {\n            userId\n          } = JSON.parse(userIdFromSession);\n          fetchMessages(userId);\n        }\n\n        //setNewMessageContent('');\n      } else {\n        console.error('Missing reply content or selected patient');\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Messages\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      style: styles.messageList,\n      children: getAllReceviedMessages.map(message => /*#__PURE__*/_jsxDEV(\"li\", {\n        style: styles.messageItem,\n        children: /*#__PURE__*/_jsxDEV(MessageItem, {\n          message: message,\n          handleReply: handleReply\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 25\n        }, this)\n      }, message.timeStamp, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"List of Patients\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      style: styles.messageList,\n      children: patients.map(patient => /*#__PURE__*/_jsxDEV(\"li\", {\n        style: styles.messageItem,\n        children: [patient.firstname, \" - \", patient.id, /*#__PURE__*/_jsxDEV(Link, {\n          to: `/staff/selectedPatient/${patient.id}`,\n          style: styles.linkButton,\n          children: \"Select Patient\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 25\n        }, this)]\n      }, patient.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.searchSection,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Search For Patients\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PatientSearchForm, {\n        onSearchComplete: handleSearchComplete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.searchSection,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Searched Patients\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }, this), searchedPatients.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: styles.messageList,\n        children: searchedPatients.map(patient => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: styles.messageItem,\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 33\n          }, this), \" \", patient.firstName, \" \", patient.lastName, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 95\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 33\n          }, this), \" \", patient.email, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 73\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Gender:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 33\n          }, this), \" \", patient.gender]\n        }, patient.lastName, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No patients found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 9\n  }, this);\n};\n_s2(DoctorPage, \"5X1TLWN87xiz31ko4T163PE21DE=\");\n_c2 = DoctorPage;\nexport default DoctorPage;\n\n//<button onClick={() => handleReply(selectedPatient?.userId || 0)}>Reply</button>\nvar _c, _c2;\n$RefreshReg$(_c, \"MessageItem\");\n$RefreshReg$(_c2, \"DoctorPage\");","map":{"version":3,"names":["React","useState","useEffect","Link","ApiService","ApiServices","PatientSearchForm","styles","jsxDEV","_jsxDEV","MessageItem","message","handleReply","_s","newReplyContent","setNewReplyContent","senderName","setSenderName","messageSent","setMessageSent","handleSendReply","sender","alert","error","console","fetchSenderName","log","senderData","getPatientByUserId","name","style","padding","borderBottom","children","fileName","_jsxFileName","lineNumber","columnNumber","messageText","type","value","onChange","e","target","placeholder","input","onClick","button","_c","DoctorPage","_s2","patients","setPatients","messages","setMessages","getAllSentMessages","setAllSentMessages","getAllReceviedMessages","setAllReceviedMessages","selectedPatient","setSelectedPatient","searchedPatients","setSearchedPatients","fetchMessages","userId","getAllSentMessagesForUser","then","getAllReceivedMessagesForUser","handleSearchComplete","searchResults","fetchPatients","fetchedPatients","getPatients","userIdFromSession","sessionStorage","getItem","JSON","parse","receiverId","replyContent","userIdFromSession2","senderId","find","patient","id","messageData","timeStamp","Date","toISOString","receiver","createMessage","container","messageList","map","messageItem","firstname","to","linkButton","searchSection","onSearchComplete","length","firstName","lastName","email","gender","_c2","$RefreshReg$"],"sources":["C:/Users/Mohamad H/Desktop/KTH/TIDAA3/Fullstack/labbar/Front/FrontEnd/j-client/src/components/DoctorPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport ApiService from '../services/ApiServices';\r\nimport {Patient, Msg, PatientForSearch} from \"../interface/interface\";\r\nimport ApiServices from \"../services/ApiServices\";\r\nimport PatientSearchForm from './PatientSearchForm';\r\nimport { styles } from './styles';\r\n\r\ninterface MessageItemProps {\r\n    message: Msg;\r\n    handleReply: (receiverId: number, replyContent: string) => void;\r\n\r\n}\r\n\r\nconst MessageItem: React.FC<MessageItemProps> = ({ message, handleReply }) => {\r\n    const [newReplyContent, setNewReplyContent] = useState('');\r\n    const [senderName, setSenderName] = useState('');\r\n    const [messageSent, setMessageSent] = useState(false);\r\n\r\n    const handleSendReply = async () => {\r\n        try {\r\n            // Call handleReply and pass the receiver's userId and newReplyContent\r\n            await handleReply(message.sender, newReplyContent);\r\n            setMessageSent(true); // Set message sent to true after successful send\r\n            alert(\"Message successfully sent!\");\r\n            setNewReplyContent(''); // Clear the reply input after sending\r\n        } catch (error) {\r\n            console.error('Error sending message:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const fetchSenderName = async () => {\r\n            try {\r\n                console.log(message.sender)\r\n                const senderData = await ApiServices.getPatientByUserId(message.sender);\r\n                if (senderData) {\r\n                    setSenderName(senderData.name || 'Unknown');\r\n                } else {\r\n                    setSenderName('Unknown');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching sender data:', error);\r\n                setSenderName('Unknown');\r\n            }\r\n        };\r\n\r\n        fetchSenderName();\r\n    }, [message.sender]);\r\n\r\n\r\n\r\n    return (\r\n        <div style={{ padding: '10px', borderBottom: '1px solid #eee' }}>\r\n            <p><strong>Content:</strong> {message.messageText}</p>\r\n            <p><strong>Sender:</strong> {senderName}</p>\r\n            {!messageSent && (\r\n                <div>\r\n                    <h4>Reply</h4>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={newReplyContent}\r\n                        onChange={(e) => setNewReplyContent(e.target.value)}\r\n                        placeholder=\"Type your reply...\"\r\n                        style={styles.input}\r\n                    />\r\n                    <button onClick={handleSendReply} style={styles.button}>Send Reply</button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst DoctorPage = () => {\r\n    const [patients, setPatients] = useState<Patient[]>([]);\r\n    const [messages, setMessages] = useState<Msg[]>([]);\r\n    const [getAllSentMessages, setAllSentMessages] = useState<Msg[]>([]);\r\n    const [getAllReceviedMessages, setAllReceviedMessages] = useState<Msg[]>([]);\r\n    const [selectedPatient, setSelectedPatient] = useState<Patient | null>(null);\r\n    const [searchedPatients, setSearchedPatients] = useState<PatientForSearch[]>([]); // State för sökta patienter\r\n\r\n\r\n    const fetchMessages = async (userId: number) => {\r\n        try {\r\n            console.log(userId)\r\n            ApiServices.getAllSentMessagesForUser(userId).then(setAllSentMessages);\r\n            ApiServices.getAllReceivedMessagesForUser(userId).then(setAllReceviedMessages);\r\n            console.log(getAllSentMessages)\r\n        } catch (error) {\r\n            console.error('Error fetching messages:', error);\r\n        }\r\n    };\r\n    const handleSearchComplete = (searchResults: PatientForSearch[]) => {\r\n        console.log(searchResults)\r\n\r\n        setSearchedPatients(searchResults); // Spara sökresultaten i state\r\n        //console.log(searchResults)\r\n    };\r\n    useEffect(() => {\r\n        // Fetch list of patients when the component mounts\r\n        const fetchPatients = async () => {\r\n            try {\r\n                const fetchedPatients = await ApiService.getPatients(); // Fetch patients from API\r\n                setPatients(fetchedPatients); // Set the fetched patients in state\r\n            } catch (error) {\r\n                console.error('Error fetching patients:', error);\r\n            }\r\n        };\r\n\r\n        const userIdFromSession = sessionStorage.getItem('currentUserLoggedIn');\r\n        if (userIdFromSession) {\r\n            const { userId } = JSON.parse(userIdFromSession);\r\n            fetchMessages(userId); // Fetch messages for the logged-in doctor (using userId)\r\n        }\r\n        fetchPatients();\r\n    }, []);\r\n\r\n    const handleReply = async (receiverId: number, replyContent: string) => {\r\n        try {\r\n            if (replyContent) {\r\n                const userIdFromSession2 = sessionStorage.getItem('currentUserLoggedIn');\r\n                let senderId = 0;\r\n                if (userIdFromSession2) {\r\n                    const { userId } = JSON.parse(userIdFromSession2);\r\n                    senderId = userId;\r\n                }\r\n                // Here, you can set the selectedPatient based on the receiverId\r\n                const selectedPatient = patients.find((patient) => patient.id === receiverId);\r\n                setSelectedPatient(selectedPatient || null);\r\n\r\n                const messageData = {\r\n                    messageText: replyContent,\r\n                    timeStamp: new Date().toISOString(),\r\n                    sender: senderId,\r\n                    receiver: receiverId,\r\n                };\r\n                await ApiService.createMessage(messageData);\r\n\r\n                // Fetch updated messages for the logged-in doctor after sending the reply\r\n                const userIdFromSession = sessionStorage.getItem('currentUserLoggedIn');\r\n                if (userIdFromSession) {\r\n                    const { userId } = JSON.parse(userIdFromSession);\r\n                    fetchMessages(userId);\r\n                }\r\n\r\n                //setNewMessageContent('');\r\n            } else {\r\n                console.error('Missing reply content or selected patient');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error sending message:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={styles.container}>\r\n            <h2>Messages</h2>\r\n            <ul style={styles.messageList}>\r\n                {getAllReceviedMessages.map((message) => (\r\n                    <li key={message.timeStamp} style={styles.messageItem}>\r\n                        <MessageItem message={message} handleReply={handleReply}/>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n\r\n            <h3>List of Patients</h3>\r\n            <ul style={styles.messageList}>\r\n                {patients.map((patient) => (\r\n                    <li key={patient.id} style={styles.messageItem}>\r\n                        {patient.firstname} - {patient.id}\r\n                        <Link to={`/staff/selectedPatient/${patient.id}`} style={styles.linkButton}>\r\n                            Select Patient\r\n                        </Link>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n            \r\n            <div style={styles.searchSection}>\r\n                <h3>Search For Patients</h3>\r\n                <PatientSearchForm onSearchComplete={handleSearchComplete} />\r\n            </div>\r\n\r\n            <div style={styles.searchSection}>\r\n                <h3>Searched Patients</h3>\r\n                {searchedPatients.length > 0 ? (\r\n                    <ul style={styles.messageList}>\r\n                        {searchedPatients.map((patient) => (\r\n                            <li key={patient.lastName} style={styles.messageItem}>\r\n                                <strong>Name:</strong> {patient.firstName} {patient.lastName} <br/>\r\n                                <strong>Email:</strong> {patient.email} <br/>\r\n                                <strong>Gender:</strong> {patient.gender}\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                ) : (\r\n                    <p>No patients found</p>\r\n                )}\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n};\r\n\r\nexport default DoctorPage;\r\n\r\n\r\n//<button onClick={() => handleReply(selectedPatient?.userId || 0)}>Reply</button>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}