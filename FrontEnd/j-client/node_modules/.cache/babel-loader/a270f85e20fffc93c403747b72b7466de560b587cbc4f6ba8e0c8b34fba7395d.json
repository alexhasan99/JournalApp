{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Mohamad H\\\\Desktop\\\\KTH\\\\TIDAA3\\\\Fullstack\\\\labbar\\\\Front\\\\FrontEnd\\\\j-client\\\\src\\\\components\\\\DoctorPage.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport ApiService from '../services/ApiServices';\nimport ApiServices from \"../services/ApiServices\";\nimport DrawingForm from \"./DrawingForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MessageItem = ({\n  message,\n  handleReply\n}) => {\n  _s();\n  const [newReplyContent, setNewReplyContent] = useState('');\n  const [senderName, setSenderName] = useState('');\n  const [messageSent, setMessageSent] = useState(false);\n  const handleSendReply = async () => {\n    try {\n      // Call handleReply and pass the receiver's userId and newReplyContent\n      await handleReply(message.sender, newReplyContent);\n      setMessageSent(true); // Set message sent to true after successful send\n      alert(\"Message successfully sent!\");\n      setNewReplyContent(''); // Clear the reply input after sending\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n  useEffect(() => {\n    const fetchSenderName = async () => {\n      try {\n        const senderData = await ApiServices.getPatientByUserId(message.sender);\n        if (senderData) {\n          setSenderName(senderData.name || 'Unknown');\n        } else {\n          setSenderName('Unknown');\n        }\n      } catch (error) {\n        console.error('Error fetching sender data:', error);\n        setSenderName('Unknown');\n      }\n    };\n    fetchSenderName();\n  }, [message.sender]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Content: \", message.messageText]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Sender: \", senderName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), !messageSent && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Reply\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newReplyContent,\n        onChange: e => setNewReplyContent(e.target.value),\n        placeholder: \"Type your reply...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSendReply,\n        children: \"Send Reply\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n_s(MessageItem, \"VZWPMTPjSzA/suk4DDDFoBJR8uk=\");\n_c = MessageItem;\nconst DoctorPage = () => {\n  _s2();\n  const [patients, setPatients] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [getAllSentMessages, setAllSentMessages] = useState([]);\n  const [getAllReceviedMessages, setAllReceviedMessages] = useState([]);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const fetchMessages = async userId => {\n    try {\n      console.log(userId);\n      ApiServices.getAllSentMessagesForUser(userId).then(setAllSentMessages);\n      ApiServices.getAllReceivedMessagesForUser(userId).then(setAllReceviedMessages);\n      console.log(getAllSentMessages);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n  useEffect(() => {\n    // Fetch list of patients when the component mounts\n    const fetchPatients = async () => {\n      try {\n        const fetchedPatients = await ApiService.getPatients(); // Fetch patients from API\n        setPatients(fetchedPatients); // Set the fetched patients in state\n      } catch (error) {\n        console.error('Error fetching patients:', error);\n      }\n    };\n    const userIdFromSession = sessionStorage.getItem('currentUserLoggedIn');\n    if (userIdFromSession) {\n      const {\n        userId\n      } = JSON.parse(userIdFromSession);\n      fetchMessages(userId); // Fetch messages for the logged-in doctor (using userId)\n    }\n\n    fetchPatients();\n  }, []);\n  const handleReply = async (receiverId, replyContent) => {\n    try {\n      if (replyContent) {\n        const userIdFromSession2 = sessionStorage.getItem('currentUserLoggedIn');\n        let senderId = 0;\n        if (userIdFromSession2) {\n          const {\n            userId\n          } = JSON.parse(userIdFromSession2);\n          senderId = userId;\n        }\n        // Here, you can set the selectedPatient based on the receiverId\n        const selectedPatient = patients.find(patient => patient.id === receiverId);\n        setSelectedPatient(selectedPatient || null);\n        const messageData = {\n          messageText: replyContent,\n          timeStamp: new Date().toISOString(),\n          sender: senderId,\n          receiver: receiverId\n        };\n        await ApiService.createMessage(messageData);\n\n        // Fetch updated messages for the logged-in doctor after sending the reply\n        const userIdFromSession = sessionStorage.getItem('currentUserLoggedIn');\n        if (userIdFromSession) {\n          const {\n            userId\n          } = JSON.parse(userIdFromSession);\n          fetchMessages(userId);\n        }\n\n        //setNewMessageContent('');\n      } else {\n        console.error('Missing reply content or selected patient');\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Messages\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: getAllReceviedMessages.map(message => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(MessageItem, {\n          message: message,\n          handleReply: handleReply\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 25\n        }, this)\n      }, message.timeStamp, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"List of Patients\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: patients.map(patient => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [patient.firstname, \" - \", patient.id, /*#__PURE__*/_jsxDEV(Link, {\n          to: `/staff/selectedPatient/${patient.id}`,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"Select Patient\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 25\n        }, this)]\n      }, patient.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(DrawingForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 9\n  }, this);\n};\n_s2(DoctorPage, \"igNGsjf+wroR8UFw0sUfiju9I94=\");\n_c2 = DoctorPage;\nexport default DoctorPage;\n\n//<button onClick={() => handleReply(selectedPatient?.userId || 0)}>Reply</button>\nvar _c, _c2;\n$RefreshReg$(_c, \"MessageItem\");\n$RefreshReg$(_c2, \"DoctorPage\");","map":{"version":3,"names":["React","useState","useEffect","Link","ApiService","ApiServices","DrawingForm","jsxDEV","_jsxDEV","MessageItem","message","handleReply","_s","newReplyContent","setNewReplyContent","senderName","setSenderName","messageSent","setMessageSent","handleSendReply","sender","alert","error","console","fetchSenderName","senderData","getPatientByUserId","name","children","messageText","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","placeholder","onClick","_c","DoctorPage","_s2","patients","setPatients","messages","setMessages","getAllSentMessages","setAllSentMessages","getAllReceviedMessages","setAllReceviedMessages","selectedPatient","setSelectedPatient","fetchMessages","userId","log","getAllSentMessagesForUser","then","getAllReceivedMessagesForUser","fetchPatients","fetchedPatients","getPatients","userIdFromSession","sessionStorage","getItem","JSON","parse","receiverId","replyContent","userIdFromSession2","senderId","find","patient","id","messageData","timeStamp","Date","toISOString","receiver","createMessage","map","firstname","to","_c2","$RefreshReg$"],"sources":["C:/Users/Mohamad H/Desktop/KTH/TIDAA3/Fullstack/labbar/Front/FrontEnd/j-client/src/components/DoctorPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport ApiService from '../services/ApiServices';\r\nimport { Patient, Msg } from \"../interface/interface\";\r\nimport ApiServices from \"../services/ApiServices\";\r\nimport DrawingForm from \"./DrawingForm\";\r\ninterface MessageItemProps {\r\n    message: Msg;\r\n    handleReply: (receiverId: number, replyContent: string) => void;\r\n    \r\n}\r\n\r\nconst MessageItem: React.FC<MessageItemProps> = ({ message, handleReply }) => {\r\n    const [newReplyContent, setNewReplyContent] = useState('');\r\n    const [senderName, setSenderName] = useState('');\r\n    const [messageSent, setMessageSent] = useState(false);\r\n\r\n    const handleSendReply = async () => {\r\n        try {\r\n            // Call handleReply and pass the receiver's userId and newReplyContent\r\n            await handleReply(message.sender, newReplyContent);\r\n            setMessageSent(true); // Set message sent to true after successful send\r\n            alert(\"Message successfully sent!\");\r\n            setNewReplyContent(''); // Clear the reply input after sending\r\n        } catch (error) {\r\n            console.error('Error sending message:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const fetchSenderName = async () => {\r\n            try {\r\n                const senderData = await ApiServices.getPatientByUserId(message.sender);\r\n                if (senderData) {\r\n                    setSenderName(senderData.name || 'Unknown');\r\n                } else {\r\n                    setSenderName('Unknown');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching sender data:', error);\r\n                setSenderName('Unknown');\r\n            }\r\n        };\r\n\r\n        fetchSenderName();\r\n    }, [message.sender]);\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <p>Content: {message.messageText}</p>\r\n            <p>Sender: {senderName}</p>\r\n            {/* Display other message details */}\r\n            {!messageSent && (\r\n                <div>\r\n                    <h4>Reply</h4>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={newReplyContent}\r\n                        onChange={(e) => setNewReplyContent(e.target.value)}\r\n                        placeholder=\"Type your reply...\"\r\n                    />\r\n                    <button onClick={handleSendReply}>Send Reply</button>\r\n                </div>\r\n            )}\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nconst DoctorPage = () => {\r\n    const [patients, setPatients] = useState<Patient[]>([]);\r\n    const [messages, setMessages] = useState<Msg[]>([]);\r\n    const [getAllSentMessages, setAllSentMessages] = useState<Msg[]>([]);\r\n    const [getAllReceviedMessages, setAllReceviedMessages] = useState<Msg[]>([]);\r\n    const [selectedPatient, setSelectedPatient] = useState<Patient | null>(null);\r\n\r\n    const fetchMessages = async (userId: number) => {\r\n        try {\r\n            console.log(userId)\r\n            ApiServices.getAllSentMessagesForUser(userId).then(setAllSentMessages);\r\n            ApiServices.getAllReceivedMessagesForUser(userId).then(setAllReceviedMessages);\r\n            console.log(getAllSentMessages)\r\n        } catch (error) {\r\n            console.error('Error fetching messages:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Fetch list of patients when the component mounts\r\n        const fetchPatients = async () => {\r\n            try {\r\n                const fetchedPatients = await ApiService.getPatients(); // Fetch patients from API\r\n                setPatients(fetchedPatients); // Set the fetched patients in state\r\n            } catch (error) {\r\n                console.error('Error fetching patients:', error);\r\n            }\r\n        };\r\n\r\n        const userIdFromSession = sessionStorage.getItem('currentUserLoggedIn');\r\n        if (userIdFromSession) {\r\n            const { userId } = JSON.parse(userIdFromSession);\r\n            fetchMessages(userId); // Fetch messages for the logged-in doctor (using userId)\r\n        }\r\n        fetchPatients();\r\n    }, []);\r\n\r\n    const handleReply = async (receiverId: number, replyContent: string) => {\r\n        try {\r\n            if (replyContent) {\r\n                const userIdFromSession2 = sessionStorage.getItem('currentUserLoggedIn');\r\n                let senderId = 0;\r\n                if (userIdFromSession2) {\r\n                    const { userId } = JSON.parse(userIdFromSession2);\r\n                    senderId = userId;\r\n                }\r\n                // Here, you can set the selectedPatient based on the receiverId\r\n                const selectedPatient = patients.find((patient) => patient.id === receiverId);\r\n                setSelectedPatient(selectedPatient || null);\r\n\r\n                const messageData = {\r\n                    messageText: replyContent,\r\n                    timeStamp: new Date().toISOString(),\r\n                    sender: senderId,\r\n                    receiver: receiverId,\r\n                };\r\n                await ApiService.createMessage(messageData);\r\n\r\n                // Fetch updated messages for the logged-in doctor after sending the reply\r\n                const userIdFromSession = sessionStorage.getItem('currentUserLoggedIn');\r\n                if (userIdFromSession) {\r\n                    const { userId } = JSON.parse(userIdFromSession);\r\n                    fetchMessages(userId);\r\n                }\r\n\r\n                //setNewMessageContent('');\r\n            } else {\r\n                console.error('Missing reply content or selected patient');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error sending message:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2>Messages</h2>\r\n            <ul>\r\n                {getAllReceviedMessages.map((message) => (\r\n                    <li key ={message.timeStamp}>\r\n                        <MessageItem message={message} handleReply={handleReply} />\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n\r\n            {/* Other components or sections */}\r\n            <h3>List of Patients</h3>\r\n            <ul>\r\n                {patients.map((patient) => (\r\n                    <li key={patient.id}>\r\n                        {patient.firstname} - {patient.id}\r\n                        <Link to={`/staff/selectedPatient/${patient.id}`}>\r\n                            <button>Select Patient</button>\r\n                        </Link>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n             {/* Här lägger vi till DrawingForm-komponenten */}\r\n        <DrawingForm />\r\n        </div>\r\n\r\n    );\r\n};\r\n\r\nexport default DoctorPage;\r\n\r\n\r\n//<button onClick={() => handleReply(selectedPatient?.userId || 0)}>Reply</button>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}